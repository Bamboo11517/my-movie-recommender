# 🎬 映画レコメンデーションシステム

## 概要
本プロジェクトは、ユーザーが選択した「好きな映画」の傾向に基づき、動的にオススメの映画を提案するWebアプリケーションです。
PythonのStreamlitフレームワークを使用し、MovieLensデータセット（10万件の評価データ）を用いた協調フィルタリングによって推薦を行います。

## 採用したレコメンデーションアルゴリズム

本システムでは、ユーザーの入力状態（映画選択の有無）に応じて、異なる2つのアルゴリズムを動的に切り替えています。

### 1. 映画選択時：アイテムベース協調フィルタリング (Item-Based Collaborative Filtering)
* **概要:** ユーザー×映画の評価行列から「映画同士の相関関係（類似度）」を計算し、ユーザーが選んだ映画と評価パターンが似ている映画を推薦します。
* **採用理由:**
    * ユーザーが具体的な好み（3つ以上の映画）を提示しているため、その嗜好パターンに合致する「類似アイテム」を探す手法が最も適切であるため。
    * ピアソン相関係数を用いることで、ユーザーごとの評価基準の甘辛（全体的に高くつけるか、低くつけるか）を吸収し、純粋な好みの傾向を抽出できるため。

### 2. 未選択時：ポピュラリティベース（高評価ランキング）
* **概要:** 全ユーザーの評価データを集計し、信頼できる評価数（50件以上）を持つ映画の中で、平均評価値が高い順に表示します。
* **採用理由:**
    * 個人の嗜好データ（コールドスタート問題）がない状態では、統計的に多くの人が「良い」と判断した作品を提示することが、ハズレのない推薦として最適解であるため。

## オススメ映画表示ロジック（ボタン押下後の処理）

「オススメ映画を表示」ボタンが押下された後、以下のロジックで推薦リストを生成し、画面へ遷移・表示します。

1.  **入力チェック**
    * ユーザーが選択した映画リスト（`selected_movies`）の要素数を確認します。
2.  **相関行列の生成（事前準備）**
    * 評価データ（`ratings_100k.csv`）を基にクロス集計を行い、映画間のピアソン相関行列を作成します（ノイズ除去のため、共通評価数30未満の関係は除外）。
3.  **スコアリング処理（重要）**
    * ユーザーが選択した**3つ以上の映画それぞれに対して**、相関の高い映画とスコア（相関係数）を取得します。
    * **スコアの合算:** 複数の選択映画から推薦された同一の映画については、そのスコアを加算（`add`）します。これにより、「選んだ映画の**どれか1つ**に似ている作品」よりも「選んだ映画の**すべて**に共通して似ている作品」がより上位にランクインする仕組みになっています。
4.  **フィルタリングとソート**
    * ユーザーが既に選択した映画（入力値）を推薦候補から除外します。
    * 合算スコアが高い順にデータをソートし、上位5件を抽出します。
5.  **画面表示**
    * 抽出された5件の映画タイトルを画面に動的に描画します。

## 動作環境・起動手順

Webサイトを動作させるためには、以下の手順に従ってください。

### 1. 必要ファイルの配置
プロジェクトフォルダ内に以下の3つのファイルが揃っていることを確認してください。
* `app.py`（今回作成したプログラムファイル）
* `movies_100k.csv`（映画一覧データ）
* `ratings_100k.csv`（評価値データ）

### 2. インストール作業
Python（3.8以上推奨）がインストールされた環境で、必要なライブラリをインストールします。

pip install -r requirements.txt
をターミナルに入力して実行します。
          
### 3. 実行手順

streamlit run app.py
をターミナルに入力して実行します。
